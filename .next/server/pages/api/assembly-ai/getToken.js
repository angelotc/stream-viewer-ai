"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/assembly-ai/getToken";
exports.ids = ["pages/api/assembly-ai/getToken"];
exports.modules = {

/***/ "@prisma/client":
/*!*********************************!*\
  !*** external "@prisma/client" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("@prisma/client");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "assemblyai":
/*!*****************************!*\
  !*** external "assemblyai" ***!
  \*****************************/
/***/ ((module) => {

module.exports = import("assemblyai");;

/***/ }),

/***/ "iron-session":
/*!*******************************!*\
  !*** external "iron-session" ***!
  \*******************************/
/***/ ((module) => {

module.exports = import("iron-session");;

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fassembly-ai%2FgetToken&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cassembly-ai%5CgetToken.js&middlewareConfigBase64=e30%3D!":
/*!**************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fassembly-ai%2FgetToken&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cassembly-ai%5CgetToken.js&middlewareConfigBase64=e30%3D! ***!
  \**************************************************************************************************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(api)/./node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_assembly_ai_getToken_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages\\api\\assembly-ai\\getToken.js */ \"(api)/./pages/api/assembly-ai/getToken.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_pages_api_assembly_ai_getToken_js__WEBPACK_IMPORTED_MODULE_3__]);\n_pages_api_assembly_ai_getToken_js__WEBPACK_IMPORTED_MODULE_3__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_assembly_ai_getToken_js__WEBPACK_IMPORTED_MODULE_3__, 'default'));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_assembly_ai_getToken_js__WEBPACK_IMPORTED_MODULE_3__, 'config');\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/assembly-ai/getToken\",\n        pathname: \"/api/assembly-ai/getToken\",\n        // The following aren't used in production.\n        bundlePath: '',\n        filename: ''\n    },\n    userland: _pages_api_assembly_ai_getToken_js__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRmFzc2VtYmx5LWFpJTJGZ2V0VG9rZW4mcHJlZmVycmVkUmVnaW9uPSZhYnNvbHV0ZVBhZ2VQYXRoPS4lMkZwYWdlcyU1Q2FwaSU1Q2Fzc2VtYmx5LWFpJTVDZ2V0VG9rZW4uanMmbWlkZGxld2FyZUNvbmZpZ0Jhc2U2ND1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBQStGO0FBQ3ZDO0FBQ0U7QUFDMUQ7QUFDbUU7QUFDbkU7QUFDQSxpRUFBZSx3RUFBSyxDQUFDLCtEQUFRLFlBQVksRUFBQztBQUMxQztBQUNPLGVBQWUsd0VBQUssQ0FBQywrREFBUTtBQUNwQztBQUNPLHdCQUF3Qix5R0FBbUI7QUFDbEQ7QUFDQSxjQUFjLGtFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsWUFBWTtBQUNaLENBQUM7O0FBRUQscUMiLCJzb3VyY2VzIjpbIiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQYWdlc0FQSVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvcm91dGUtbW9kdWxlcy9wYWdlcy1hcGkvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBob2lzdCB9IGZyb20gXCJuZXh0L2Rpc3QvYnVpbGQvdGVtcGxhdGVzL2hlbHBlcnNcIjtcbi8vIEltcG9ydCB0aGUgdXNlcmxhbmQgY29kZS5cbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIuL3BhZ2VzXFxcXGFwaVxcXFxhc3NlbWJseS1haVxcXFxnZXRUb2tlbi5qc1wiO1xuLy8gUmUtZXhwb3J0IHRoZSBoYW5kbGVyIChzaG91bGQgYmUgdGhlIGRlZmF1bHQgZXhwb3J0KS5cbmV4cG9ydCBkZWZhdWx0IGhvaXN0KHVzZXJsYW5kLCAnZGVmYXVsdCcpO1xuLy8gUmUtZXhwb3J0IGNvbmZpZy5cbmV4cG9ydCBjb25zdCBjb25maWcgPSBob2lzdCh1c2VybGFuZCwgJ2NvbmZpZycpO1xuLy8gQ3JlYXRlIGFuZCBleHBvcnQgdGhlIHJvdXRlIG1vZHVsZSB0aGF0IHdpbGwgYmUgY29uc3VtZWQuXG5leHBvcnQgY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgUGFnZXNBUElSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuUEFHRVNfQVBJLFxuICAgICAgICBwYWdlOiBcIi9hcGkvYXNzZW1ibHktYWkvZ2V0VG9rZW5cIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9hc3NlbWJseS1haS9nZXRUb2tlblwiLFxuICAgICAgICAvLyBUaGUgZm9sbG93aW5nIGFyZW4ndCB1c2VkIGluIHByb2R1Y3Rpb24uXG4gICAgICAgIGJ1bmRsZVBhdGg6ICcnLFxuICAgICAgICBmaWxlbmFtZTogJydcbiAgICB9LFxuICAgIHVzZXJsYW5kXG59KTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGFnZXMtYXBpLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fassembly-ai%2FgetToken&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cassembly-ai%5CgetToken.js&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./lib/encryption.js":
/*!***************************!*\
  !*** ./lib/encryption.js ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   decrypt: () => (/* binding */ decrypt),\n/* harmony export */   encrypt: () => (/* binding */ encrypt)\n/* harmony export */ });\nconst crypto = __webpack_require__(/*! crypto */ \"crypto\");\nconst ENCRYPTION_KEY = process.env.ENCRYPTION_KEY; // This should be a 32-byte key\nconst ALGORITHM = 'aes-256-cbc';\nconst IV_LENGTH = 16; // For AES, this is always 16\n/**\r\n * Encrypts a string using AES-256-CBC\r\n * @param {string} text - The text to encrypt\r\n * @returns {string} - The encrypted text in hex format\r\n */ function encrypt(text) {\n    const iv = crypto.randomBytes(IV_LENGTH);\n    const cipher = crypto.createCipheriv(ALGORITHM, Buffer.from(ENCRYPTION_KEY), iv);\n    let encrypted = cipher.update(text);\n    encrypted = Buffer.concat([\n        encrypted,\n        cipher.final()\n    ]);\n    return iv.toString('hex') + ':' + encrypted.toString('hex');\n}\n/**\r\n * Decrypts a string that was encrypted using the encrypt function\r\n * @param {string} text - The encrypted text in hex format\r\n * @returns {string} - The decrypted text\r\n */ function decrypt(text) {\n    const [ivHex, encryptedHex] = text.split(':');\n    const iv = Buffer.from(ivHex, 'hex');\n    const encryptedText = Buffer.from(encryptedHex, 'hex');\n    const decipher = crypto.createDecipheriv(ALGORITHM, Buffer.from(ENCRYPTION_KEY), iv);\n    let decrypted = decipher.update(encryptedText);\n    decrypted = Buffer.concat([\n        decrypted,\n        decipher.final()\n    ]);\n    return decrypted.toString();\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvZW5jcnlwdGlvbi5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUFBLE1BQU1BLFNBQVNDLG1CQUFPQSxDQUFDLHNCQUFRO0FBRS9CLE1BQU1DLGlCQUFpQkMsUUFBUUMsR0FBRyxDQUFDRixjQUFjLEVBQUUsK0JBQStCO0FBQ2xGLE1BQU1HLFlBQVk7QUFDbEIsTUFBTUMsWUFBWSxJQUFJLDZCQUE2QjtBQUVuRDs7OztDQUlDLEdBQ00sU0FBU0MsUUFBUUMsSUFBSTtJQUMxQixNQUFNQyxLQUFLVCxPQUFPVSxXQUFXLENBQUNKO0lBQzlCLE1BQU1LLFNBQVNYLE9BQU9ZLGNBQWMsQ0FBQ1AsV0FBV1EsT0FBT0MsSUFBSSxDQUFDWixpQkFBaUJPO0lBQzdFLElBQUlNLFlBQVlKLE9BQU9LLE1BQU0sQ0FBQ1I7SUFDOUJPLFlBQVlGLE9BQU9JLE1BQU0sQ0FBQztRQUFDRjtRQUFXSixPQUFPTyxLQUFLO0tBQUc7SUFDckQsT0FBT1QsR0FBR1UsUUFBUSxDQUFDLFNBQVMsTUFBTUosVUFBVUksUUFBUSxDQUFDO0FBQ3ZEO0FBRUE7Ozs7Q0FJQyxHQUNNLFNBQVNDLFFBQVFaLElBQUk7SUFDMUIsTUFBTSxDQUFDYSxPQUFPQyxhQUFhLEdBQUdkLEtBQUtlLEtBQUssQ0FBQztJQUN6QyxNQUFNZCxLQUFLSSxPQUFPQyxJQUFJLENBQUNPLE9BQU87SUFDOUIsTUFBTUcsZ0JBQWdCWCxPQUFPQyxJQUFJLENBQUNRLGNBQWM7SUFDaEQsTUFBTUcsV0FBV3pCLE9BQU8wQixnQkFBZ0IsQ0FBQ3JCLFdBQVdRLE9BQU9DLElBQUksQ0FBQ1osaUJBQWlCTztJQUNqRixJQUFJa0IsWUFBWUYsU0FBU1QsTUFBTSxDQUFDUTtJQUNoQ0csWUFBWWQsT0FBT0ksTUFBTSxDQUFDO1FBQUNVO1FBQVdGLFNBQVNQLEtBQUs7S0FBRztJQUN2RCxPQUFPUyxVQUFVUixRQUFRO0FBQzNCIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXEFuZ2Vsb1xcRG9jdW1lbnRzXFxfcHJvamVjdHNcXE5ldyBmb2xkZXJcXHN0cmVhbS12aWV3ZXItYWlcXGxpYlxcZW5jcnlwdGlvbi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBjcnlwdG8gPSByZXF1aXJlKCdjcnlwdG8nKTtcclxuXHJcbmNvbnN0IEVOQ1JZUFRJT05fS0VZID0gcHJvY2Vzcy5lbnYuRU5DUllQVElPTl9LRVk7IC8vIFRoaXMgc2hvdWxkIGJlIGEgMzItYnl0ZSBrZXlcclxuY29uc3QgQUxHT1JJVEhNID0gJ2Flcy0yNTYtY2JjJztcclxuY29uc3QgSVZfTEVOR1RIID0gMTY7IC8vIEZvciBBRVMsIHRoaXMgaXMgYWx3YXlzIDE2XHJcblxyXG4vKipcclxuICogRW5jcnlwdHMgYSBzdHJpbmcgdXNpbmcgQUVTLTI1Ni1DQkNcclxuICogQHBhcmFtIHtzdHJpbmd9IHRleHQgLSBUaGUgdGV4dCB0byBlbmNyeXB0XHJcbiAqIEByZXR1cm5zIHtzdHJpbmd9IC0gVGhlIGVuY3J5cHRlZCB0ZXh0IGluIGhleCBmb3JtYXRcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBlbmNyeXB0KHRleHQpIHtcclxuICBjb25zdCBpdiA9IGNyeXB0by5yYW5kb21CeXRlcyhJVl9MRU5HVEgpO1xyXG4gIGNvbnN0IGNpcGhlciA9IGNyeXB0by5jcmVhdGVDaXBoZXJpdihBTEdPUklUSE0sIEJ1ZmZlci5mcm9tKEVOQ1JZUFRJT05fS0VZKSwgaXYpO1xyXG4gIGxldCBlbmNyeXB0ZWQgPSBjaXBoZXIudXBkYXRlKHRleHQpO1xyXG4gIGVuY3J5cHRlZCA9IEJ1ZmZlci5jb25jYXQoW2VuY3J5cHRlZCwgY2lwaGVyLmZpbmFsKCldKTtcclxuICByZXR1cm4gaXYudG9TdHJpbmcoJ2hleCcpICsgJzonICsgZW5jcnlwdGVkLnRvU3RyaW5nKCdoZXgnKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIERlY3J5cHRzIGEgc3RyaW5nIHRoYXQgd2FzIGVuY3J5cHRlZCB1c2luZyB0aGUgZW5jcnlwdCBmdW5jdGlvblxyXG4gKiBAcGFyYW0ge3N0cmluZ30gdGV4dCAtIFRoZSBlbmNyeXB0ZWQgdGV4dCBpbiBoZXggZm9ybWF0XHJcbiAqIEByZXR1cm5zIHtzdHJpbmd9IC0gVGhlIGRlY3J5cHRlZCB0ZXh0XHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gZGVjcnlwdCh0ZXh0KSB7XHJcbiAgY29uc3QgW2l2SGV4LCBlbmNyeXB0ZWRIZXhdID0gdGV4dC5zcGxpdCgnOicpO1xyXG4gIGNvbnN0IGl2ID0gQnVmZmVyLmZyb20oaXZIZXgsICdoZXgnKTtcclxuICBjb25zdCBlbmNyeXB0ZWRUZXh0ID0gQnVmZmVyLmZyb20oZW5jcnlwdGVkSGV4LCAnaGV4Jyk7XHJcbiAgY29uc3QgZGVjaXBoZXIgPSBjcnlwdG8uY3JlYXRlRGVjaXBoZXJpdihBTEdPUklUSE0sIEJ1ZmZlci5mcm9tKEVOQ1JZUFRJT05fS0VZKSwgaXYpO1xyXG4gIGxldCBkZWNyeXB0ZWQgPSBkZWNpcGhlci51cGRhdGUoZW5jcnlwdGVkVGV4dCk7XHJcbiAgZGVjcnlwdGVkID0gQnVmZmVyLmNvbmNhdChbZGVjcnlwdGVkLCBkZWNpcGhlci5maW5hbCgpXSk7XHJcbiAgcmV0dXJuIGRlY3J5cHRlZC50b1N0cmluZygpO1xyXG59ICJdLCJuYW1lcyI6WyJjcnlwdG8iLCJyZXF1aXJlIiwiRU5DUllQVElPTl9LRVkiLCJwcm9jZXNzIiwiZW52IiwiQUxHT1JJVEhNIiwiSVZfTEVOR1RIIiwiZW5jcnlwdCIsInRleHQiLCJpdiIsInJhbmRvbUJ5dGVzIiwiY2lwaGVyIiwiY3JlYXRlQ2lwaGVyaXYiLCJCdWZmZXIiLCJmcm9tIiwiZW5jcnlwdGVkIiwidXBkYXRlIiwiY29uY2F0IiwiZmluYWwiLCJ0b1N0cmluZyIsImRlY3J5cHQiLCJpdkhleCIsImVuY3J5cHRlZEhleCIsInNwbGl0IiwiZW5jcnlwdGVkVGV4dCIsImRlY2lwaGVyIiwiY3JlYXRlRGVjaXBoZXJpdiIsImRlY3J5cHRlZCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./lib/encryption.js\n");

/***/ }),

/***/ "(api)/./lib/session-config.js":
/*!*******************************!*\
  !*** ./lib/session-config.js ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   sessionConfig: () => (/* binding */ sessionConfig)\n/* harmony export */ });\nconst sessionConfig = {\n    password: process.env.SESSION_PASSWORD,\n    cookieName: 'twitch_session',\n    cookieOptions: {\n        secure: \"development\" === 'production',\n        httpOnly: true,\n        sameSite: 'lax'\n    }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvc2Vzc2lvbi1jb25maWcuanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFPLE1BQU1BLGdCQUFnQjtJQUMzQkMsVUFBVUMsUUFBUUMsR0FBRyxDQUFDQyxnQkFBZ0I7SUFDdENDLFlBQVk7SUFDWkMsZUFBZTtRQUNiQyxRQUFRTCxrQkFBeUI7UUFDakNNLFVBQVU7UUFDVkMsVUFBVTtJQUNaO0FBQ0YsRUFBRSIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxBbmdlbG9cXERvY3VtZW50c1xcX3Byb2plY3RzXFxOZXcgZm9sZGVyXFxzdHJlYW0tdmlld2VyLWFpXFxsaWJcXHNlc3Npb24tY29uZmlnLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjb25zdCBzZXNzaW9uQ29uZmlnID0ge1xyXG4gIHBhc3N3b3JkOiBwcm9jZXNzLmVudi5TRVNTSU9OX1BBU1NXT1JELFxyXG4gIGNvb2tpZU5hbWU6ICd0d2l0Y2hfc2Vzc2lvbicsXHJcbiAgY29va2llT3B0aW9uczoge1xyXG4gICAgc2VjdXJlOiBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ3Byb2R1Y3Rpb24nLFxyXG4gICAgaHR0cE9ubHk6IHRydWUsXHJcbiAgICBzYW1lU2l0ZTogJ2xheCcsXHJcbiAgfSxcclxufTsgIl0sIm5hbWVzIjpbInNlc3Npb25Db25maWciLCJwYXNzd29yZCIsInByb2Nlc3MiLCJlbnYiLCJTRVNTSU9OX1BBU1NXT1JEIiwiY29va2llTmFtZSIsImNvb2tpZU9wdGlvbnMiLCJzZWN1cmUiLCJodHRwT25seSIsInNhbWVTaXRlIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./lib/session-config.js\n");

/***/ }),

/***/ "(api)/./pages/api/assembly-ai/getToken.js":
/*!*******************************************!*\
  !*** ./pages/api/assembly-ai/getToken.js ***!
  \*******************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _middleware_withAuth__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../middleware/withAuth */ \"(api)/./pages/api/middleware/withAuth.js\");\n/* harmony import */ var assemblyai__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! assemblyai */ \"assemblyai\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_middleware_withAuth__WEBPACK_IMPORTED_MODULE_0__, assemblyai__WEBPACK_IMPORTED_MODULE_1__]);\n([_middleware_withAuth__WEBPACK_IMPORTED_MODULE_0__, assemblyai__WEBPACK_IMPORTED_MODULE_1__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\nconst aaiClient = new assemblyai__WEBPACK_IMPORTED_MODULE_1__.AssemblyAI({\n    apiKey: \"7432b47d91b349d68ac1c2d293b328f9\"\n});\nasync function handler(req, res) {\n    if (req.method !== 'GET') {\n        return res.status(405).json({\n            error: 'Method not allowed'\n        });\n    }\n    try {\n        const token = await aaiClient.realtime.createTemporaryToken({\n            expires_in: 3600\n        });\n        res.status(200).json({\n            token\n        });\n    } catch (error) {\n        console.error('Error creating token:', error);\n        res.status(500).json({\n            error: error.message\n        });\n    }\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,_middleware_withAuth__WEBPACK_IMPORTED_MODULE_0__.withAuth)(handler));\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9wYWdlcy9hcGkvYXNzZW1ibHktYWkvZ2V0VG9rZW4uanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQWtEO0FBQ1Y7QUFFeEMsTUFBTUUsWUFBWSxJQUFJRCxrREFBVUEsQ0FBQztJQUMvQkUsUUFBUUMsa0NBQTBDO0FBQ3BEO0FBRUEsZUFBZUcsUUFBUUMsR0FBRyxFQUFFQyxHQUFHO0lBQzdCLElBQUlELElBQUlFLE1BQU0sS0FBSyxPQUFPO1FBQ3hCLE9BQU9ELElBQUlFLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7WUFBRUMsT0FBTztRQUFxQjtJQUM1RDtJQUVBLElBQUk7UUFDRixNQUFNQyxRQUFRLE1BQU1aLFVBQVVhLFFBQVEsQ0FBQ0Msb0JBQW9CLENBQUM7WUFBRUMsWUFBWTtRQUFLO1FBQy9FUixJQUFJRSxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO1lBQUVFO1FBQU07SUFDL0IsRUFBRSxPQUFPRCxPQUFPO1FBQ2RLLFFBQVFMLEtBQUssQ0FBQyx5QkFBeUJBO1FBQ3ZDSixJQUFJRSxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO1lBQUVDLE9BQU9BLE1BQU1NLE9BQU87UUFBQztJQUM5QztBQUNGO0FBRUEsaUVBQWVuQiw4REFBUUEsQ0FBQ08sUUFBUUEsRUFBQyIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxBbmdlbG9cXERvY3VtZW50c1xcX3Byb2plY3RzXFxOZXcgZm9sZGVyXFxzdHJlYW0tdmlld2VyLWFpXFxwYWdlc1xcYXBpXFxhc3NlbWJseS1haVxcZ2V0VG9rZW4uanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgd2l0aEF1dGggfSBmcm9tICcuLi9taWRkbGV3YXJlL3dpdGhBdXRoJztcclxuaW1wb3J0IHsgQXNzZW1ibHlBSSB9IGZyb20gJ2Fzc2VtYmx5YWknO1xyXG5cclxuY29uc3QgYWFpQ2xpZW50ID0gbmV3IEFzc2VtYmx5QUkoeyBcclxuICBhcGlLZXk6IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0FTU0VNQkxZQUlfQVBJX0tFWSBcclxufSk7XHJcblxyXG5hc3luYyBmdW5jdGlvbiBoYW5kbGVyKHJlcSwgcmVzKSB7XHJcbiAgaWYgKHJlcS5tZXRob2QgIT09ICdHRVQnKSB7XHJcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDUpLmpzb24oeyBlcnJvcjogJ01ldGhvZCBub3QgYWxsb3dlZCcgfSk7XHJcbiAgfVxyXG5cclxuICB0cnkge1xyXG4gICAgY29uc3QgdG9rZW4gPSBhd2FpdCBhYWlDbGllbnQucmVhbHRpbWUuY3JlYXRlVGVtcG9yYXJ5VG9rZW4oeyBleHBpcmVzX2luOiAzNjAwIH0pO1xyXG4gICAgcmVzLnN0YXR1cygyMDApLmpzb24oeyB0b2tlbiB9KTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgY3JlYXRpbmcgdG9rZW46JywgZXJyb3IpO1xyXG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogZXJyb3IubWVzc2FnZSB9KTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IHdpdGhBdXRoKGhhbmRsZXIpOyAiXSwibmFtZXMiOlsid2l0aEF1dGgiLCJBc3NlbWJseUFJIiwiYWFpQ2xpZW50IiwiYXBpS2V5IiwicHJvY2VzcyIsImVudiIsIk5FWFRfUFVCTElDX0FTU0VNQkxZQUlfQVBJX0tFWSIsImhhbmRsZXIiLCJyZXEiLCJyZXMiLCJtZXRob2QiLCJzdGF0dXMiLCJqc29uIiwiZXJyb3IiLCJ0b2tlbiIsInJlYWx0aW1lIiwiY3JlYXRlVGVtcG9yYXJ5VG9rZW4iLCJleHBpcmVzX2luIiwiY29uc29sZSIsIm1lc3NhZ2UiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./pages/api/assembly-ai/getToken.js\n");

/***/ }),

/***/ "(api)/./pages/api/middleware/withAuth.js":
/*!******************************************!*\
  !*** ./pages/api/middleware/withAuth.js ***!
  \******************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   withAuth: () => (/* binding */ withAuth)\n/* harmony export */ });\n/* harmony import */ var iron_session__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! iron-session */ \"iron-session\");\n/* harmony import */ var _lib_session_config__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../lib/session-config */ \"(api)/./lib/session-config.js\");\n/* harmony import */ var _twitch_auth_refresh__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../twitch/auth/refresh */ \"(api)/./pages/api/twitch/auth/refresh.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([iron_session__WEBPACK_IMPORTED_MODULE_0__]);\niron_session__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n// Higher-order function that combines iron-session with our auth check\nfunction withAuth(handler) {\n    return async (req, res)=>{\n        const session = await (0,iron_session__WEBPACK_IMPORTED_MODULE_0__.getIronSession)(req, res, _lib_session_config__WEBPACK_IMPORTED_MODULE_1__.sessionConfig);\n        // Check if user is authenticated\n        if (!session.user) {\n            return res.status(401).json({\n                error: 'Unauthorized',\n                message: 'Please login to access this endpoint'\n            });\n        }\n        // Check if token needs refreshing\n        if (isTokenExpired(session.user.expiresAt)) {\n            try {\n                const newTokens = await (0,_twitch_auth_refresh__WEBPACK_IMPORTED_MODULE_2__.refreshTwitchToken)(session.user.refreshToken);\n                session.user = {\n                    ...session.user,\n                    accessToken: newTokens.accessToken,\n                    refreshToken: newTokens.refreshToken,\n                    expiresAt: newTokens.expiresAt\n                };\n                await session.save();\n            } catch (error) {\n                // If refresh fails, force re-login\n                session.destroy();\n                return res.status(401).json({\n                    error: 'Token expired',\n                    message: 'Please login again'\n                });\n            }\n        }\n        // Add session to request for handler to use\n        req.session = session;\n        // If authenticated and token is valid, proceed to the actual handler\n        return handler(req, res);\n    };\n}\nfunction isTokenExpired(expiresAt) {\n    // Add some buffer (e.g., 5 minutes) to ensure we refresh before actual expiration\n    const bufferMs = 5 * 60 * 1000;\n    return new Date(expiresAt).getTime() - bufferMs < Date.now();\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9wYWdlcy9hcGkvbWlkZGxld2FyZS93aXRoQXV0aC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQThDO0FBQ2M7QUFDQTtBQUU1RCx1RUFBdUU7QUFDaEUsU0FBU0csU0FBU0MsT0FBTztJQUM5QixPQUFPLE9BQU9DLEtBQUtDO1FBQ2pCLE1BQU1DLFVBQVUsTUFBTVAsNERBQWNBLENBQUNLLEtBQUtDLEtBQUtMLDhEQUFhQTtRQUU1RCxpQ0FBaUM7UUFDakMsSUFBSSxDQUFDTSxRQUFRQyxJQUFJLEVBQUU7WUFDakIsT0FBT0YsSUFBSUcsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztnQkFDMUJDLE9BQU87Z0JBQ1BDLFNBQVM7WUFDWDtRQUNGO1FBRUEsa0NBQWtDO1FBQ2xDLElBQUlDLGVBQWVOLFFBQVFDLElBQUksQ0FBQ00sU0FBUyxHQUFHO1lBQzFDLElBQUk7Z0JBQ0YsTUFBTUMsWUFBWSxNQUFNYix3RUFBa0JBLENBQUNLLFFBQVFDLElBQUksQ0FBQ1EsWUFBWTtnQkFDcEVULFFBQVFDLElBQUksR0FBRztvQkFDYixHQUFHRCxRQUFRQyxJQUFJO29CQUNmUyxhQUFhRixVQUFVRSxXQUFXO29CQUNsQ0QsY0FBY0QsVUFBVUMsWUFBWTtvQkFDcENGLFdBQVdDLFVBQVVELFNBQVM7Z0JBQ2hDO2dCQUNBLE1BQU1QLFFBQVFXLElBQUk7WUFDcEIsRUFBRSxPQUFPUCxPQUFPO2dCQUNkLG1DQUFtQztnQkFDbkNKLFFBQVFZLE9BQU87Z0JBQ2YsT0FBT2IsSUFBSUcsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztvQkFDMUJDLE9BQU87b0JBQ1BDLFNBQVM7Z0JBQ1g7WUFDRjtRQUNGO1FBRUEsNENBQTRDO1FBQzVDUCxJQUFJRSxPQUFPLEdBQUdBO1FBRWQscUVBQXFFO1FBQ3JFLE9BQU9ILFFBQVFDLEtBQUtDO0lBQ3RCO0FBQ0Y7QUFFQSxTQUFTTyxlQUFlQyxTQUFTO0lBQy9CLGtGQUFrRjtJQUNsRixNQUFNTSxXQUFXLElBQUksS0FBSztJQUMxQixPQUFPLElBQUlDLEtBQUtQLFdBQVdRLE9BQU8sS0FBS0YsV0FBV0MsS0FBS0UsR0FBRztBQUM1RCIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxBbmdlbG9cXERvY3VtZW50c1xcX3Byb2plY3RzXFxOZXcgZm9sZGVyXFxzdHJlYW0tdmlld2VyLWFpXFxwYWdlc1xcYXBpXFxtaWRkbGV3YXJlXFx3aXRoQXV0aC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBnZXRJcm9uU2Vzc2lvbiB9IGZyb20gJ2lyb24tc2Vzc2lvbic7XHJcbmltcG9ydCB7IHNlc3Npb25Db25maWcgfSBmcm9tICcuLi8uLi8uLi9saWIvc2Vzc2lvbi1jb25maWcnO1xyXG5pbXBvcnQgeyByZWZyZXNoVHdpdGNoVG9rZW4gfSBmcm9tICcuLi90d2l0Y2gvYXV0aC9yZWZyZXNoJztcclxuXHJcbi8vIEhpZ2hlci1vcmRlciBmdW5jdGlvbiB0aGF0IGNvbWJpbmVzIGlyb24tc2Vzc2lvbiB3aXRoIG91ciBhdXRoIGNoZWNrXHJcbmV4cG9ydCBmdW5jdGlvbiB3aXRoQXV0aChoYW5kbGVyKSB7XHJcbiAgcmV0dXJuIGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gICAgY29uc3Qgc2Vzc2lvbiA9IGF3YWl0IGdldElyb25TZXNzaW9uKHJlcSwgcmVzLCBzZXNzaW9uQ29uZmlnKTtcclxuXHJcbiAgICAvLyBDaGVjayBpZiB1c2VyIGlzIGF1dGhlbnRpY2F0ZWRcclxuICAgIGlmICghc2Vzc2lvbi51c2VyKSB7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMSkuanNvbih7IFxyXG4gICAgICAgIGVycm9yOiAnVW5hdXRob3JpemVkJyxcclxuICAgICAgICBtZXNzYWdlOiAnUGxlYXNlIGxvZ2luIHRvIGFjY2VzcyB0aGlzIGVuZHBvaW50JyBcclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gQ2hlY2sgaWYgdG9rZW4gbmVlZHMgcmVmcmVzaGluZ1xyXG4gICAgaWYgKGlzVG9rZW5FeHBpcmVkKHNlc3Npb24udXNlci5leHBpcmVzQXQpKSB7XHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgbmV3VG9rZW5zID0gYXdhaXQgcmVmcmVzaFR3aXRjaFRva2VuKHNlc3Npb24udXNlci5yZWZyZXNoVG9rZW4pO1xyXG4gICAgICAgIHNlc3Npb24udXNlciA9IHtcclxuICAgICAgICAgIC4uLnNlc3Npb24udXNlcixcclxuICAgICAgICAgIGFjY2Vzc1Rva2VuOiBuZXdUb2tlbnMuYWNjZXNzVG9rZW4sXHJcbiAgICAgICAgICByZWZyZXNoVG9rZW46IG5ld1Rva2Vucy5yZWZyZXNoVG9rZW4sXHJcbiAgICAgICAgICBleHBpcmVzQXQ6IG5ld1Rva2Vucy5leHBpcmVzQXRcclxuICAgICAgICB9O1xyXG4gICAgICAgIGF3YWl0IHNlc3Npb24uc2F2ZSgpO1xyXG4gICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIC8vIElmIHJlZnJlc2ggZmFpbHMsIGZvcmNlIHJlLWxvZ2luXHJcbiAgICAgICAgc2Vzc2lvbi5kZXN0cm95KCk7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgXHJcbiAgICAgICAgICBlcnJvcjogJ1Rva2VuIGV4cGlyZWQnLFxyXG4gICAgICAgICAgbWVzc2FnZTogJ1BsZWFzZSBsb2dpbiBhZ2FpbicgXHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBBZGQgc2Vzc2lvbiB0byByZXF1ZXN0IGZvciBoYW5kbGVyIHRvIHVzZVxyXG4gICAgcmVxLnNlc3Npb24gPSBzZXNzaW9uO1xyXG5cclxuICAgIC8vIElmIGF1dGhlbnRpY2F0ZWQgYW5kIHRva2VuIGlzIHZhbGlkLCBwcm9jZWVkIHRvIHRoZSBhY3R1YWwgaGFuZGxlclxyXG4gICAgcmV0dXJuIGhhbmRsZXIocmVxLCByZXMpO1xyXG4gIH07XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGlzVG9rZW5FeHBpcmVkKGV4cGlyZXNBdCkge1xyXG4gIC8vIEFkZCBzb21lIGJ1ZmZlciAoZS5nLiwgNSBtaW51dGVzKSB0byBlbnN1cmUgd2UgcmVmcmVzaCBiZWZvcmUgYWN0dWFsIGV4cGlyYXRpb25cclxuICBjb25zdCBidWZmZXJNcyA9IDUgKiA2MCAqIDEwMDA7XHJcbiAgcmV0dXJuIG5ldyBEYXRlKGV4cGlyZXNBdCkuZ2V0VGltZSgpIC0gYnVmZmVyTXMgPCBEYXRlLm5vdygpO1xyXG59ICJdLCJuYW1lcyI6WyJnZXRJcm9uU2Vzc2lvbiIsInNlc3Npb25Db25maWciLCJyZWZyZXNoVHdpdGNoVG9rZW4iLCJ3aXRoQXV0aCIsImhhbmRsZXIiLCJyZXEiLCJyZXMiLCJzZXNzaW9uIiwidXNlciIsInN0YXR1cyIsImpzb24iLCJlcnJvciIsIm1lc3NhZ2UiLCJpc1Rva2VuRXhwaXJlZCIsImV4cGlyZXNBdCIsIm5ld1Rva2VucyIsInJlZnJlc2hUb2tlbiIsImFjY2Vzc1Rva2VuIiwic2F2ZSIsImRlc3Ryb3kiLCJidWZmZXJNcyIsIkRhdGUiLCJnZXRUaW1lIiwibm93Il0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./pages/api/middleware/withAuth.js\n");

/***/ }),

/***/ "(api)/./pages/api/twitch/auth/refresh.js":
/*!******************************************!*\
  !*** ./pages/api/twitch/auth/refresh.js ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler),\n/* harmony export */   refreshTwitchToken: () => (/* binding */ refreshTwitchToken)\n/* harmony export */ });\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _lib_encryption__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../lib/encryption */ \"(api)/./lib/encryption.js\");\n\n // You'll need this from earlier\nconst prisma = new _prisma_client__WEBPACK_IMPORTED_MODULE_0__.PrismaClient();\nconst TWITCH_CLIENT_ID = process.env.TWITCH_CLIENT_ID;\nconst TWITCH_CLIENT_SECRET = process.env.TWITCH_CLIENT_SECRET;\nasync function refreshTwitchToken(refreshToken) {\n    try {\n        // Exchange refresh token for new access token\n        const response = await fetch('https://id.twitch.tv/oauth2/token', {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/x-www-form-urlencoded'\n            },\n            body: new URLSearchParams({\n                client_id: TWITCH_CLIENT_ID,\n                client_secret: TWITCH_CLIENT_SECRET,\n                grant_type: 'refresh_token',\n                refresh_token: refreshToken\n            })\n        });\n        if (!response.ok) {\n            throw new Error('Failed to refresh token');\n        }\n        const data = await response.json();\n        // Calculate new expiration time\n        const expiresAt = new Date(Date.now() + data.expires_in * 1000);\n        // Update tokens in database\n        await prisma.session.update({\n            where: {\n                refreshToken: (0,_lib_encryption__WEBPACK_IMPORTED_MODULE_1__.encrypt)(refreshToken)\n            },\n            data: {\n                accessToken: (0,_lib_encryption__WEBPACK_IMPORTED_MODULE_1__.encrypt)(data.access_token),\n                refreshToken: (0,_lib_encryption__WEBPACK_IMPORTED_MODULE_1__.encrypt)(data.refresh_token),\n                expiresAt\n            }\n        });\n        return {\n            accessToken: data.access_token,\n            refreshToken: data.refresh_token,\n            expiresAt\n        };\n    } catch (error) {\n        console.error('Token refresh error:', error);\n        throw error;\n    }\n}\n// Optional: Add an API route handler if you want to manually refresh\nasync function handler(req, res) {\n    if (req.method !== 'POST') {\n        return res.status(405).json({\n            error: 'Method not allowed'\n        });\n    }\n    try {\n        const { refreshToken } = req.body;\n        if (!refreshToken) {\n            return res.status(400).json({\n                error: 'Refresh token is required'\n            });\n        }\n        const newTokens = await refreshTwitchToken(refreshToken);\n        res.status(200).json(newTokens);\n    } catch (error) {\n        console.error('Refresh handler error:', error);\n        res.status(500).json({\n            error: error.message\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9wYWdlcy9hcGkvdHdpdGNoL2F1dGgvcmVmcmVzaC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUE4QztBQUNPLENBQUMsZ0NBQWdDO0FBRXRGLE1BQU1FLFNBQVMsSUFBSUYsd0RBQVlBO0FBRS9CLE1BQU1HLG1CQUFtQkMsUUFBUUMsR0FBRyxDQUFDRixnQkFBZ0I7QUFDckQsTUFBTUcsdUJBQXVCRixRQUFRQyxHQUFHLENBQUNDLG9CQUFvQjtBQUV0RCxlQUFlQyxtQkFBbUJDLFlBQVk7SUFDbkQsSUFBSTtRQUNGLDhDQUE4QztRQUM5QyxNQUFNQyxXQUFXLE1BQU1DLE1BQU0scUNBQXFDO1lBQ2hFQyxRQUFRO1lBQ1JDLFNBQVM7Z0JBQ1AsZ0JBQWdCO1lBQ2xCO1lBQ0FDLE1BQU0sSUFBSUMsZ0JBQWdCO2dCQUN4QkMsV0FBV1o7Z0JBQ1hhLGVBQWVWO2dCQUNmVyxZQUFZO2dCQUNaQyxlQUFlVjtZQUNqQjtRQUNGO1FBRUEsSUFBSSxDQUFDQyxTQUFTVSxFQUFFLEVBQUU7WUFDaEIsTUFBTSxJQUFJQyxNQUFNO1FBQ2xCO1FBRUEsTUFBTUMsT0FBTyxNQUFNWixTQUFTYSxJQUFJO1FBRWhDLGdDQUFnQztRQUNoQyxNQUFNQyxZQUFZLElBQUlDLEtBQUtBLEtBQUtDLEdBQUcsS0FBS0osS0FBS0ssVUFBVSxHQUFHO1FBRTFELDRCQUE0QjtRQUM1QixNQUFNeEIsT0FBT3lCLE9BQU8sQ0FBQ0MsTUFBTSxDQUFDO1lBQzFCQyxPQUFPO2dCQUNMckIsY0FBY1Asd0RBQU9BLENBQUNPO1lBQ3hCO1lBQ0FhLE1BQU07Z0JBQ0pTLGFBQWE3Qix3REFBT0EsQ0FBQ29CLEtBQUtVLFlBQVk7Z0JBQ3RDdkIsY0FBY1Asd0RBQU9BLENBQUNvQixLQUFLSCxhQUFhO2dCQUN4Q0s7WUFDRjtRQUNGO1FBRUEsT0FBTztZQUNMTyxhQUFhVCxLQUFLVSxZQUFZO1lBQzlCdkIsY0FBY2EsS0FBS0gsYUFBYTtZQUNoQ0s7UUFDRjtJQUNGLEVBQUUsT0FBT1MsT0FBTztRQUNkQyxRQUFRRCxLQUFLLENBQUMsd0JBQXdCQTtRQUN0QyxNQUFNQTtJQUNSO0FBQ0Y7QUFFQSxxRUFBcUU7QUFDdEQsZUFBZUUsUUFBUUMsR0FBRyxFQUFFQyxHQUFHO0lBQzVDLElBQUlELElBQUl4QixNQUFNLEtBQUssUUFBUTtRQUN6QixPQUFPeUIsSUFBSUMsTUFBTSxDQUFDLEtBQUtmLElBQUksQ0FBQztZQUFFVSxPQUFPO1FBQXFCO0lBQzVEO0lBRUEsSUFBSTtRQUNGLE1BQU0sRUFBRXhCLFlBQVksRUFBRSxHQUFHMkIsSUFBSXRCLElBQUk7UUFDakMsSUFBSSxDQUFDTCxjQUFjO1lBQ2pCLE9BQU80QixJQUFJQyxNQUFNLENBQUMsS0FBS2YsSUFBSSxDQUFDO2dCQUFFVSxPQUFPO1lBQTRCO1FBQ25FO1FBRUEsTUFBTU0sWUFBWSxNQUFNL0IsbUJBQW1CQztRQUMzQzRCLElBQUlDLE1BQU0sQ0FBQyxLQUFLZixJQUFJLENBQUNnQjtJQUN2QixFQUFFLE9BQU9OLE9BQU87UUFDZEMsUUFBUUQsS0FBSyxDQUFDLDBCQUEwQkE7UUFDeENJLElBQUlDLE1BQU0sQ0FBQyxLQUFLZixJQUFJLENBQUM7WUFBRVUsT0FBT0EsTUFBTU8sT0FBTztRQUFDO0lBQzlDO0FBQ0YiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcQW5nZWxvXFxEb2N1bWVudHNcXF9wcm9qZWN0c1xcTmV3IGZvbGRlclxcc3RyZWFtLXZpZXdlci1haVxccGFnZXNcXGFwaVxcdHdpdGNoXFxhdXRoXFxyZWZyZXNoLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFByaXNtYUNsaWVudCB9IGZyb20gJ0BwcmlzbWEvY2xpZW50JztcclxuaW1wb3J0IHsgZW5jcnlwdCB9IGZyb20gJy4uLy4uLy4uLy4uL2xpYi9lbmNyeXB0aW9uJzsgLy8gWW91J2xsIG5lZWQgdGhpcyBmcm9tIGVhcmxpZXJcclxuXHJcbmNvbnN0IHByaXNtYSA9IG5ldyBQcmlzbWFDbGllbnQoKTtcclxuXHJcbmNvbnN0IFRXSVRDSF9DTElFTlRfSUQgPSBwcm9jZXNzLmVudi5UV0lUQ0hfQ0xJRU5UX0lEO1xyXG5jb25zdCBUV0lUQ0hfQ0xJRU5UX1NFQ1JFVCA9IHByb2Nlc3MuZW52LlRXSVRDSF9DTElFTlRfU0VDUkVUO1xyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJlZnJlc2hUd2l0Y2hUb2tlbihyZWZyZXNoVG9rZW4pIHtcclxuICB0cnkge1xyXG4gICAgLy8gRXhjaGFuZ2UgcmVmcmVzaCB0b2tlbiBmb3IgbmV3IGFjY2VzcyB0b2tlblxyXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9pZC50d2l0Y2gudHYvb2F1dGgyL3Rva2VuJywge1xyXG4gICAgICBtZXRob2Q6ICdQT1NUJyxcclxuICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJyxcclxuICAgICAgfSxcclxuICAgICAgYm9keTogbmV3IFVSTFNlYXJjaFBhcmFtcyh7XHJcbiAgICAgICAgY2xpZW50X2lkOiBUV0lUQ0hfQ0xJRU5UX0lELFxyXG4gICAgICAgIGNsaWVudF9zZWNyZXQ6IFRXSVRDSF9DTElFTlRfU0VDUkVULFxyXG4gICAgICAgIGdyYW50X3R5cGU6ICdyZWZyZXNoX3Rva2VuJyxcclxuICAgICAgICByZWZyZXNoX3Rva2VuOiByZWZyZXNoVG9rZW5cclxuICAgICAgfSksXHJcbiAgICB9KTtcclxuXHJcbiAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcignRmFpbGVkIHRvIHJlZnJlc2ggdG9rZW4nKTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xyXG5cclxuICAgIC8vIENhbGN1bGF0ZSBuZXcgZXhwaXJhdGlvbiB0aW1lXHJcbiAgICBjb25zdCBleHBpcmVzQXQgPSBuZXcgRGF0ZShEYXRlLm5vdygpICsgZGF0YS5leHBpcmVzX2luICogMTAwMCk7XHJcblxyXG4gICAgLy8gVXBkYXRlIHRva2VucyBpbiBkYXRhYmFzZVxyXG4gICAgYXdhaXQgcHJpc21hLnNlc3Npb24udXBkYXRlKHtcclxuICAgICAgd2hlcmU6IHtcclxuICAgICAgICByZWZyZXNoVG9rZW46IGVuY3J5cHQocmVmcmVzaFRva2VuKVxyXG4gICAgICB9LFxyXG4gICAgICBkYXRhOiB7XHJcbiAgICAgICAgYWNjZXNzVG9rZW46IGVuY3J5cHQoZGF0YS5hY2Nlc3NfdG9rZW4pLFxyXG4gICAgICAgIHJlZnJlc2hUb2tlbjogZW5jcnlwdChkYXRhLnJlZnJlc2hfdG9rZW4pLFxyXG4gICAgICAgIGV4cGlyZXNBdFxyXG4gICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBhY2Nlc3NUb2tlbjogZGF0YS5hY2Nlc3NfdG9rZW4sXHJcbiAgICAgIHJlZnJlc2hUb2tlbjogZGF0YS5yZWZyZXNoX3Rva2VuLFxyXG4gICAgICBleHBpcmVzQXRcclxuICAgIH07XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ1Rva2VuIHJlZnJlc2ggZXJyb3I6JywgZXJyb3IpO1xyXG4gICAgdGhyb3cgZXJyb3I7XHJcbiAgfVxyXG59XHJcblxyXG4vLyBPcHRpb25hbDogQWRkIGFuIEFQSSByb3V0ZSBoYW5kbGVyIGlmIHlvdSB3YW50IHRvIG1hbnVhbGx5IHJlZnJlc2hcclxuZXhwb3J0IGRlZmF1bHQgYXN5bmMgZnVuY3Rpb24gaGFuZGxlcihyZXEsIHJlcykge1xyXG4gIGlmIChyZXEubWV0aG9kICE9PSAnUE9TVCcpIHtcclxuICAgIHJldHVybiByZXMuc3RhdHVzKDQwNSkuanNvbih7IGVycm9yOiAnTWV0aG9kIG5vdCBhbGxvd2VkJyB9KTtcclxuICB9XHJcblxyXG4gIHRyeSB7XHJcbiAgICBjb25zdCB7IHJlZnJlc2hUb2tlbiB9ID0gcmVxLmJvZHk7XHJcbiAgICBpZiAoIXJlZnJlc2hUb2tlbikge1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ1JlZnJlc2ggdG9rZW4gaXMgcmVxdWlyZWQnIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IG5ld1Rva2VucyA9IGF3YWl0IHJlZnJlc2hUd2l0Y2hUb2tlbihyZWZyZXNoVG9rZW4pO1xyXG4gICAgcmVzLnN0YXR1cygyMDApLmpzb24obmV3VG9rZW5zKTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignUmVmcmVzaCBoYW5kbGVyIGVycm9yOicsIGVycm9yKTtcclxuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfSk7XHJcbiAgfVxyXG59ICJdLCJuYW1lcyI6WyJQcmlzbWFDbGllbnQiLCJlbmNyeXB0IiwicHJpc21hIiwiVFdJVENIX0NMSUVOVF9JRCIsInByb2Nlc3MiLCJlbnYiLCJUV0lUQ0hfQ0xJRU5UX1NFQ1JFVCIsInJlZnJlc2hUd2l0Y2hUb2tlbiIsInJlZnJlc2hUb2tlbiIsInJlc3BvbnNlIiwiZmV0Y2giLCJtZXRob2QiLCJoZWFkZXJzIiwiYm9keSIsIlVSTFNlYXJjaFBhcmFtcyIsImNsaWVudF9pZCIsImNsaWVudF9zZWNyZXQiLCJncmFudF90eXBlIiwicmVmcmVzaF90b2tlbiIsIm9rIiwiRXJyb3IiLCJkYXRhIiwianNvbiIsImV4cGlyZXNBdCIsIkRhdGUiLCJub3ciLCJleHBpcmVzX2luIiwic2Vzc2lvbiIsInVwZGF0ZSIsIndoZXJlIiwiYWNjZXNzVG9rZW4iLCJhY2Nlc3NfdG9rZW4iLCJlcnJvciIsImNvbnNvbGUiLCJoYW5kbGVyIiwicmVxIiwicmVzIiwic3RhdHVzIiwibmV3VG9rZW5zIiwibWVzc2FnZSJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./pages/api/twitch/auth/refresh.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fassembly-ai%2FgetToken&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cassembly-ai%5CgetToken.js&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();